---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  message = F,
  warning = F,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# clustifyrdatahub

<!-- badges: start -->
[![R build status](https://github.com/rnabioco/clustifyrdata/workflows/R-CMD-check/badge.svg)](https://github.com/rnabioco/clustifyrdata/actions)
<!-- badges: end -->

clustifyrdatahub provides external reference data sets for cell-type assignment with [clustifyr](https://rnabioco.github.io/clustifyr).

Available references include:
```
knitr::kable(system.file("extdata", "metadata.csv", package = "clustifyrdatahub"))
```

To use `clustifyrdatahub`
```{r}
library(ExperimentHub)
eh <- ExperimentHub()

## query
refs <- query(eh, "clustifyrdatahub")
refs
## either by index or id
ref_hema_microarray <- refs[[7]]         ## load the first resource in the list
ref_hema_microarray <- refs[["EH3450"]]  ## load by EH id

## or list and load
refs <- listResources(eh, "clustifyrdatahub")
ref_hema_microarray <- loadResources(eh, "clustifyrdatahub", "ref_hema_microarray")[[1]]

## use for classification of cell types
res <- clustifyr::clustify(
  input = clustifyr::pbmc_matrix_small,
  metadata = clustifyr::pbmc_meta$classified,
  ref_mat = ref_hema_microarray,
  query_genes = clustifyr::pbmc_vargenes
)
```

```{r}
## or load refs by function name (after loading hub library)
library(clustifyrdatahub)
head(ref_hema_microarray())            ## data are loaded
ref_hema_microarray(metadata = TRUE)   ## only metadata
```


Alternatively, see the [reference page](https://rnabioco.github.io/clustifyrdata/reference) for available data sets, and [individual ref download page](https://rnabioco.github.io/clustifyrdata/articles/download_refs.html).

Data sets have uniform suffixes:
- `ref_*` : the prebuilt reference expression matrix.

## Installation

``` r
# install.packages("remotes")
remotes::install_github("rnabioco/clustifyrdatahub")
```
